## tcp 的安全性指的是什么

TCP的可靠性非常脆弱，只要有中间人人为的篡改数据，同时对篡改的数据重新计算checksum(校验和)，到达目的地TCP层很显然检测不出数据已经被篡改了，会提交给application，如果application没有自己的纠错功能，那目的地application就被篡改的数据欺骗了

既然TCP如此脆弱，为何我们还称之为可靠传输？那还要追溯TCP的历史，TCP/IP本来是一个美国局域网的标准，用于局域网内主机之间的通信协议，由于物理链路安全可控，没有第三方的人为破坏，所以TCP checksum可以一定程度上检测到，由于信号突变而产生的数据错误。再加上TCP对传输的数据有确认机制，所以在这个大前提下，我们一直称TCP是一种可靠的传输机制

但现在的TCP暴露于开放的互联网世界，在传输过程中要经过很多设备，只要有**人为篡改数据，并且通过精心数据调整，checksum可以和没有篡改之前是一样的，**所以说TCP的可靠性非常脆弱！

### TCP是采取以下方法解决这个问题的：

TCP有一个**option 19，Authentication Option，MD5 Hash，**其工作原理如下：

以TCP报文数据 + Pre-Shared密码做为共同输入参数(注意：TCP报文数据也作为了参数进行加密)，生成一个MD5 Hash**（MAC：Message Authentication Code）**，这个Hash有三个特点：

**1）唯一性**

原始TCP报文数据对应唯一一个MAC

**2）不可逆**

根据MAC无法推导出原始的报文，也无法推导出共享密码

**3）确认数据来源于真正的源**

由于pre-shared password 只有TCP源与目的端知道，如果目的端计算出相同的MAC，则一方面证明数据没有被篡改(因为报文数据也被加密了)，另一方面也确认数据来源于真正的源

基于以上三点，TCP option 19 可以帮助TCP完成数据可靠传输的数据校验功能，以及数据来源的合法性检查。

但MD5由于有过被成功破解的例子，所以其安全性保证受到了质疑，于是TCP又开发了一个新的选项：**option 29 ，Security Option**，即采用SHA Hash，目前SHA Hash作为一种安全的哈希函数，目前还没有被破解的先例，SHA已成为最流行的、提供数据完整性（**Data Integrity**）保护的哈希函数。

**有了TCP Option 29 的保护，可以很自信地说，TCP是一种可靠的传输层协议**



