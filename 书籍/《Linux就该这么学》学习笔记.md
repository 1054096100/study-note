# 《Linux就该这么学》学习笔记

1、图形化的工具不灵活而且相比命令行来说更加消耗系统资源

2、shell也可称为“壳”，充当的是人与内核（硬件）的翻译官，用户将一些命令"告诉"shell，它就会调用相应的程序服务执行工作了



![](http://oklbfi1yj.bkt.clouddn.com/shell.PNG)

3、reboot命令用于重启系统（仅root用户可以使用），格式为：“reboot”

4、cat 命令用于**查看纯文本文件（较短的）**，格式为：`cat [选项][文件]`

​	参数：`-n 显示行号`、`-A 显示出“不可见”的符号，如空格，tab键`

5、who 命令用于查看当前登入主机的用户情况，格式为：who  [参数]

6、history命令可以用于显示历史执行过的命令，格式为：“history  [-c]” ，历史命令会保存到家目录中的“.bash_history”文件中。linux系统中以（.）开头的文件均代表隐藏文件，一般会是系统文件

7、pwd命令用于显示当前的工作目录，格式为：pwd

8、cd 命令用于切换工作路径，格式为：“cd [目录名称]”

​	cd -  切换到上次的目录

​	cd ~  切换到“家目录”

​	cd ~username  切换到其他用户的家目录

​	cd ..  切换到上级目录

9、ls 命令用于查看目录中有哪些文件，格式为：`ls [选项][文件]`

​	`ls -a`查看全部文件（包括隐藏文件）

​	`ls -l`显示文件的详细信息

注意：可以有`ls -al`这样的用法，表示，`-a`

10、more 命令用于查看纯文本文件（较长的），格式为：`more [选项][文件]`

11、wc 命令用于**统计指定文本的行数、字数、字节数**，格式为：`wc [参数] 文本`

​	参数：

​		`-l`只显示行数、`-w`只显示单词数、`-c`只显示字节数

12、diff 命令用于比较多个文本文件的差异，格式为：`diff [] 文件`

13、touch 命令用于创建空白文件和修改文件时间，格式为：`touch [选项][文件]`

​	对于linux中的文件有三种时间：

​		更改时间(mtime)：内容修改时间（不包括权限的）

​		更改权限(ctime)：更改权限与属性的时间

​		读取时间(atime)：读取文件内容的时间

touch的参数：

​	`-a`：近修改“访问时间”

​	`-m`：近修改“更改时间”

​	`-d`：同时修改atime与mtime

​	`-t`：要修改成的时间[YYMMDDhhmm]

**例如**：`touch -d "2 days ago" test`，便将访问与修改时间修改为了2天前（这个命令可以用来黑客伪造自己没有动过该文件的假象）

14、mkdir 用于创建空白的文件夹，格式为：`mkdir [选项] 目录`

15、变量`!$`代表上一条命令的参数，$?为上一条命令的执行结果

16、cp 命令用于复制文件或目录，格式为：`cp [选项] 源文件 目标文件`

​	复制命令的三种情况：（和windows操作系统的复制 -> 粘贴 类似）

​		目标文件是一个目录，会将源文件复制到该目录

​		目标文件是一个文件，会将源文件覆盖该文件

​		目标文件不存在，将会复制源文件并修改为目标文件的名称（重命名）

17、mv 命令用于**移动文件或改名**，格式为：`mv [选项] 文件名 [目标路径 | 目标文件名]`

​	例如：将文件 aaa 重命名为 bbb：`mv aaa bbb`

18、rm 命令用于删除文件或目录，格式为：`rm [选项] 文件`

​	参数：

​		`-f `忽略警告信息

​		`-i`删除前先询问（输入y是确认删除）

​		`-r`删除**文件夹**

19、`rmdir`命令仅仅删除空目录，遇到目录内有文件时则

20、useradd命令用于创建新的用户，格式为：`useradd [选项] 用户名`

21、家目录默认为 `/home/username`

22、passwd  命令用于修改用户的密码，格式为：`passwd [选项] [用户名]`，如果不加用户名的话，就是修改当前用户的密码

23、tar 命令用于对文件打包压缩或解压，格式为：`tar [选项] [文件]`

24、grep 命令用于对文本进行搜索，格式为：`grep [选项] [文件]`

​	搜索某个关键词：`grep 关键词 文本文件`

​	找出文件 “/usr/share/gedit/plugins/snippets/docbook.xml” 中所有包含entry的行并输出到/root/lines：

​	`grep entry /usr/share/gedit/plugins/snippets/docbook.xml >> /root/lines`

25、find命令用于查找文件，格式为：`find [查找路径] 查找条件 操作`

​	对于常用搜索路径有几个窍门：`~`代表用户的家目录，`.`代表当前目录，`/`代表根目录

26、管道命令符：`|`

​	管道命令符 `|` 的作用是将前一个命令的标准输出当作后一个命令的标准输入，格式为：`命令A|命令B`

​	管道命令不只是使用一次，也可以这样用：`命令A|命令B|命令C`

27、输入输出重定向

​	首先解释一下什么是标准输出和错误输出

​	**标准输出**：就是说，比如我执行了一条显示目标路径下的目录结构（也可以是其他命令，不一定是显示目录结构的命令），如果我显示成功了，那么会列出那些目录结构，此时，这些显示在屏幕上的目录结构就是标准输出

​	**错误输出**：如果我执行了`ls 路径`这条命令，但是，路径写错了，这时候，屏幕上面就会显示一条:NOo such file or directory，这条就是错误输出

​	而输出重定向就是说，**输出的东西我可以不在屏幕上显示**，而是**写入到某个文件中**

​	而输入重定向就是说我的命令可以不用以显式的方式输入在屏幕中，而是**可以将文件作为命令的标准输入**

28、如果我们想对一类文件批量操作，可以使用通配符：`*`、`?`、`[0-9]`、`[abc]`

29、alias 命令用于设置命令的别名，格式为：`alias  别名="命令"`

​	例如担心复制文件时误将文件覆盖，那么执行 `alias cp="cp -i"`则每次覆盖都会询问用户

​	unalias 命令用于取消命令的别名，格式为：`unalias 别名`

30、**Linux所有的一切都是文件，命令文件，硬件也不例外**。

31、PATH变量是干嘛用的？

32、某个用户设置的环境变量不能被其他用户使用的原因：变量的作业范围。

​	export 命令用于将局部变量提升为全局变量，格式为：`export 变量名[=变量值]`

33、Vim编辑器有三种模式：

​	命令模式：控制光标移动，可对文本进行删除、复制、粘贴等工作

​	编辑模式：正常的文本录入	

​	末行模式：保存、退出与设置编辑环境

34、复制的快捷键：Ctrl + Insert  组合键

​	粘贴的快捷键：Shift + Insert  组合键

35、一个完整的Shell脚本应该包括“脚本声明”、“注释信息”和“可执行语句”

​	脚本声明(#!):告知系统用何种shell来解释

​	注释信息(#):对可执行语句或程序功能作介绍，可以不写

​	可执行语句：执行的具体命令

其中，shell脚本的后缀是.sh，例如：`example.sh`。如果，现在处于example.sh脚本所在的目录，那么，可以使用`./example.sh`来执行脚本，如果报了`-bash: ./example.sh: Permission denied`的错误，说明是权限不够，可以修改该脚本文件的权限为777（或者可执行权限），例如：`chmod 777 example.sh`

也可以使用：`sh 脚本路径`或`source 脚本文件路径`来执行脚本

36、read命令用于将用户的输入参数赋值给指定变量，格式为：`read -p [提示语句] 变量名`

37、计划任务服务：

​	1、一次性任务：它是由atd 服务/进程来实现的，计划的管理操作是`at`命令

​	2、长期可循环的计划任务：要用到cron服务：

​			创建、编辑计划任务：`crontab -e [-u 用户名]`

​			查看计划任务：`crontab -l [-u 用户名]`

​			删除计划任务：`crontab -r [-u 用户名]`

38、用户身份与能力

​	用户身份分为：

​		1、超级用户：root（其实这个root只是个名字，真正让它成为超级用户的是它的UID值为0），UID是0

​		2、系统用户：UID是1~999

​		3、普通用户；UID是1000以上的值，它是管理员创建的用于日常工作而不能管理系统的普通用户（注意UID一定是不能冲突的，管理员创建的普通用户UID从1000开始，即便前面有闲置的号码）

​	账户名称与UID保存在/etc/passwd文件中，而账户密码则保存在/etc/shadow文件中

​		

GID（即Group IDentification的缩写）：可将多个用户加入某个组中，方便指派任务或工作

​	想象公司员工如果想要在同部门内共享资料，就可以加入自己的工作组，例如：技术部、运维部、财务部......

​	每个用户在被创建时均会创建一个默认组（其GID与UID相同，俗称基本组）而后加入的则叫扩展组，一定要分清楚。用户组名称与GID保存在/etc/group文件中

39、文件权限与归属

​	linux系统中一切都是文件，文件和目录的所属与权限--来分别规定所有者、所有组、其他用户的读，写，执行权限。读（read），写（write），执行（execute）简写为（r,w,x），亦可用数字（4，2，1）表示

![](http://oklbfi1yj.bkt.clouddn.com/linux%E6%9D%83%E9%99%90%E5%88%86%E7%B1%BB.PNG)



![](http://oklbfi1yj.bkt.clouddn.com/%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E5%85%B7%E4%BD%93%E4%BE%8B%E5%AD%90%E8%AE%B2%E8%A7%A3.PNG)



40、chmod命令用于修改文件或目录的权限，格式为：`chmod [参数] 权限 文件或目录名称`

​	chown命令用于修改文件或目录的所属主与所属组，格式为：`chown [参数] 所属主:所属组 文件或目录名称`

chmod与chown的命令参数很简单记--对于文件不加参数，遇到目录加大写`-R`(递归，修改目录内所有文件的属性)

41、文件还有一种隐藏权限，例如明明有权限删除某个文件却报错了，或者仅能为某个文件追加内容而不能减少内容，遇到这种很“奇怪”的文件，就要怀疑是文件是指隐藏权限了

​	chatter命令用于**设置文件的隐藏权限**，格式为：`chattr [参数] 文件`

​	

​	lsattr命令用于**显示文件的隐藏权限**，格式为：`lsattr [参数] 文件`

​		参数：`a`  显示所有文件和目录

​			    `l` 显示隐藏属性的全称（默认简写成一个字母）

​			    `R` 递归处理，将指定目录下的所有文件及子目录一并处理

​			    `d` 若目标文件为目录，请加此参数

42、su 命令用于变更使用者的身份（切换登陆者），格式为：`su [-] 用户名`

​	root用户切换到其他用户时无需输入密码，普通用户再切换用户需要输入对方账户密码才可以

​	须将环境变量改变为新用户的，请加参数：`-`，例如：`su - username1`

43、sudo 命令用于给普通用户提供额外权利来完成原本超级用户才能完成的任务，格式为：`sudo [参数] 命令名称`

44、ALC是设置指定的特定用户或用户组对某个文件的操作权限

45、在类Unix系统中不存在像Windows那样的C/D/E/F盘符，一切文件都是从`根/`目录开始的并按照文件系统目录标准FHS采用树形结构来存放文件并定义了每个区域的用途

​	![](http://oklbfi1yj.bkt.clouddn.com/%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84.PNG)

​	目录名称中不得包含反斜杠`/`

​	**主要常见的目录定义：**

​		`/boot` 开机所需文件--内核，开机菜单以及所需配置文件等

​		`/dev`任何设备与接口都以文件形式存放在词目录，在这个目录下的都是硬件

​		`/etc`核心的配置文件

​		`/home`用户主目录

​		`/bin`单用户维护模式下还能够被操作的命令

​		`/lib`开机时用到的函数库以及/bin与/sbin下面命令要调用的函数

​		`/sbin`开机过程中需要的

​		`/media`一般挂载或删除的设备

​		`/opt`放置第三方的软件

​		`/root`系统管理员的主文件夹

​		`tmp`任何人均可以使用的“共享”临时目录

​		`/usr/local`用户自行安装的软件

​		`/usr/sbin`非系统开机时所需要的软件/命令/脚本

​		`/usr/share`帮助与说明文件，也可以放置共享文件

​		`/var`主要存放经常变化的文件，如日志

46、绝对路径：由根目录(/)开始写起的目录或文件名的写法；相对路径：相对于当前路径的写法

47、硬盘设备是由大量的“扇区”组成的，其中第一个扇区保存着主引导记录与分区信息。单个扇区容量为512bytes组成，主引导记录需要占用446bytes，分区表的为64bytes，而每记录一个分区信息需要16bytes。一般运维人员会选择3个主分区加一个扩展分区的方法，扩展分区能够创建无限个逻辑分区，这样，我们就可以用逻辑分区来满足多分区的需求了（所以，**主分区不能超过4个**）

48、SWAP即交换分区，是一种类似于Windows系统虚拟内存的功能，将一部分硬盘空间虚拟化成内存来使用，从而解决内存容量不足的情况，因为SWAP毕竟使用硬盘资源虚拟的，所以速度比真实物理内存要慢很多，一般只有当物理内存耗尽时才会调用SWAP

49、在linux系统中的ln命令能够让用户创建出两种不同类型的文件快捷方式，一定要注意区分；

​	**硬链接**可以被理解为一个“指向原始文件inode的指针”，系统不为它分配独立的inode与文件，所以**实际上来讲硬链接文件与原始文件其实是同一个文件，只是名字不同**。于是每添加一个硬链接，该文件的inode连接数就会增加1，直到该文件的inode连接数归0才是彻底删除。概括的说因为硬链接实际就是指向原文件inode的指针，即便原始文件被删除依然可以通过链接文件访问，但是不能跨文件系统也不能链接目录文件

​	软链接也称为符号链接，即“仅仅包含它所要链接文件的路径名”因此能做目录链接也可以跨越文件系统，但原始文件被删除后链接文件也将失效，如同Windows中的**“快捷方式”**

​	ln 命令用于创建链接文件，格式为：`ln [选项] 目标`

​	创建硬链接：`ln 文件名 链接名`

​	创建软链接：`ln -s 文件名 链接名`，例如，对/etc目录做出一个名为etc的软连接：`ln  -s  /etc  etc`

50、Windows和Unix中若想查找域名对应的IP地址，常用nslookup命令。输入“ns-lookup 主机名”时会返回对应的IP地址