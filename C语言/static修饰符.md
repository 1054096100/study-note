# static修饰符

不管是什么静态变量，它的lifetime是从他被构造出来到程序结束为止。static类型的变量跟其他普通的变量的不同在于在内存中的存在形式不同，例如存在于函数中的局部变量，每当调用一次函数，就会产生一个局部变量，而存在于函数中的静态变量只在该函数第一次被调用时被初始化，然后，然后在内存只保有一份拷贝。

## 静态成员变量

常成员函数是不能修改类中成员变量的，但是静态成员变量是类变量，所以可以修改。例如：

```c++
#include <iostream>

class Widget{
public:
    Widget(int i){
        b = i;
    }

    void set() const;
private:
    static int a;
    int b;
};

int Widget::a = 1; // 由于是类变量，不专属于某个对象，被所有对象共享，所以需要在类外定义。

void Widget::set() const{
    a++; //这是对的，因为是静态成员变量是类变量
    b++; //错误的，普通成员变量是不能被常函数改变的。
}
```

当将类的某个数据成员声明为static时，该静态数据成员只能被定义一次，而且要被同类的所有对象共享。各个对象都拥有类中每一个普通数据成员的副本，但静态数据成员只有一个实例存在，与定义了多少类对象无关。

### 注意

不能用参数初始化表对静态成员初始化。

sizeof不会计算静态成员变量。

### 用途

静态数据成员的用途之一是统计有多少个对象实际存在。

## 静态成员函数

静态成员函数不能调用非静态数据成员。

### 注意

在类外实现静态成员函数时不能加static。

静态成员函数不依赖于类，因此它不能调用非静态成员函数和变量。

非静态成员函数，则可以随意调用静态成员变量和函数。

## 链接属性

### 内链接

**static修饰的函数和变量 和 const 修饰的变量(不包含extern)都是内链接，只能在本文件中使用**，即使别的文件定义了相同的变量名也不要紧。

### 外链接

**没有用static修饰的全局变量或者函数**，都是可以作为外链接；用**extern修饰的全局变量或者函数**，也是作为外部链接。还有一个：

```c++
extern const int i = 1;
```

这也是外部链接，因为**extern的作用会覆盖掉const**使它成为外链接。



















