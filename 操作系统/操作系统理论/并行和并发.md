# 并行和并发

## 总体概念

## 并发

对于单cpu而言，并发指的是宏观上的。

如果逻辑控制流在时间上是重叠的，那么它们就是并发的。这种常见的现象称为并发。

在单核 CPU 系统中，系统调度在某一时刻只能让一个进程运行，虽然这种调度机制有多种形式（大多数是时间片轮巡为主），但无论如何，**要通过不断切换需要运行的进程让其运行的方式叫并发**（也就是说一个进程的指令和另一个进程的指令是交错执行的。无论计算机是单cpu还是多个cpu看上去都像是在并发地执行多个进程）

当一个应用正在等待来自慢速I/O设备（例如磁盘）的数据到达时，内核会运行其他进程，是CPU保持繁忙。每个应用都可以按照类似的方式，通过交替执行I/O请求和其他有用的工作来使用并发。

## 并行

多cpu的时代和cpu多核的时代，就出现了新的概念：并行。**在多核 CPU 系统中**，可以让两个以上的进程**同时**运行在**不同的物理核心**上，这种运行的方式就是并行

## 区别

- 并发在**微观上不是同时执行**的，只是把时间分成若干段，使多个进程快速交替的执行（所以**单cpu也可以实现并发**），因为 **CPU 计算速度很快，使多个进程之间快速切换，从宏观上看，好像这些进程都在同一个时间点执行**
- **并行是真正的细粒度上的同时进行**：既**同一时间点上同时运行着多个进程**

## 多进程

多进程操作系统，指的是**各种进程之间切换执行**

## 超线程技术

通过采用特殊的硬件指令，可以把**一个物理内核**模拟成**两个逻辑内核**，在单处理器中实现**线程级**的**并行计算**，从而实现在单处理器上模拟双处理器的效能。但它并不象两个真正的 CPU 那样，每个 CPU 都具有独立的资源。**当两个线程都同时需要某一个资源时，其中一个要暂时停止，并让出资源，直到这些资源闲置后才能继续。因此超线程的性能并不等于两颗 CPU 的性能**。



















