# Linux内核完全剖析

## 第二章：微型计算机组成结构

操作系统与所运行的硬件环境密切相关。如果想彻底理解操作系统运行全过程，那么就需要了解它的运行硬件环境。

### 2.2、IO端口寻址和访问控制方式

#### 2.2.1、I/O端口和寻址

CPU为了访问I/O接口控制器或控制卡.上的数据和状态信息，需要首先指定它们的地址。这种地址就称为I/O端口地址或者简称端口。通常，一个I/O控制器包含访问数据的**数据端口**、输出命令的**命令端口**和访问控制器执行状态的**状态端口**。端口地址的设置方法-一般有两种:统一编址和独立编址。

### 2.3、主存储器、BIOS和CMOS存储器

1981年IBM PC刚推出时系统只带有640KB的RAM主存储器(简称内存)。由于所采用的8088/8086CPU只有20根地址线，因此内存寻址范围最高1024KB (1MB)。

目前的计算机通常都配置有512MB或者更多的物理内存容量，并且都采用Intel 32位CPU,即都是PC/AT计算机。因此CPU的物理内存寻址范围已经高达4GB (通过采用CPU的新特性，系统甚至可以寻址64GB的物理内存容量)。

![](http://oklbfi1yj.bkt.clouddn.com/Linux%E5%86%85%E6%A0%B8%E5%AE%8C%E5%85%A8%E5%89%96%E6%9E%90/1.png)

但是**为了与原来的PC在软件上兼容，系统1MB以下物理内存使用分配上仍然保持与原来的PC基本一致**，只是原来系统ROM中的基本输入输出程序BIOS一直处于CPU能寻址的内存最高端位置处。

当计算机上:电初始化时，物理内存被设置成从地址0开始的连续区域。除了地址从0xA0000~0xFFFFF (640KB~1MB，共384KB）和0XFFFE0000～0XFFFFFFFF（4GB处的最后64KB）范围以外的所有内存都可用做系统内存。这两个特定范围被用于I/O设备和BIOS程序。假如我们的计算机中有16MB的物理内存，那么在Linux0.1x系统中，0~640KB将被用做存放内核代码和数据。**Linux内核不使用BIOS功能，也不使用BIOS设置的中断向量表**。640KB~1MB之间的384KB仍然保留用作图中指明的用途。**1MB~16MB将被内核用做可分配的主内存区**。另外高速缓冲区和内存虚拟盘也会占用内核代码和数据后面的一部分内存区域。该区域通常会跨越640KB~1MB的区域。







































